# Copyright (c) 2025
# Yassine Fellous, Abdelkader Sofiane Ziri, Mathieu Duverne, Mohamed Marwane Bellagha
# Tous droits réservés. Utilisation interdite sans autorisation écrite des auteurs.

# Railway deployment configuration
name: cda-backend-sport-api

build:
  builder: dockerfile

deploy:
  startCommand: sh -c "python manage.py makemigrations installations && python manage.py migrate && python manage.py load_csv data/filtered-data-es.csv && gunicorn config.wsgi:application --bind 0.0.0.0:$PORT"
  healthcheckPath: /api/v1/installations/sports/
  healthcheckTimeout: 30
  restartPolicyType: always